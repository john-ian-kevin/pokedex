<!-- Card component -->
<div class="card" [class.flipped]="isFlipped" (click)="toggleFlip()">
    <div class="card-inner" [style.background]="pokemon.ui?.bg">
        <div class="card-front">
            <img [src]="pokemon.ui?.img" [alt]="pokemon.name" class="poke-img" />
            <h2>{{ pokemon.name | titlecase }}</h2>
            <div class="types">
                <span
                    *ngFor="let type of pokemon.types"
                    class="type-badge"
                    [style.background]="type.type.name | typeBgColor"
                    [style.color]="type.type.name | typeBgColor: 'text'"
                >
                    {{ type.type.name | typeBgColor: 'emoji' }} {{ type.type.name }}
                </span>
            </div>
        </div>

        <div class="card-back">
            <div class="card-type-info">
                <h3>Types</h3>
                <div class="types">
                    <span
                        *ngFor="let type of pokemon.types"
                        class="type-badge"
                        [style.background]="type.type.name | typeBgColor"
                        [style.color]="type.type.name | typeBgColor: 'text'"
                    >
                        {{ type.type.name | typeBgColor: 'emoji' }} {{ type.type.name }}
                    </span>
                </div>

                <h3>Stats</h3>
                <div class="stats">
                    <div *ngFor="let stat of pokemon.stats">
                        <label>{{ stat.stat.name | titlecase }}</label>
                        <div
                            class="progress-bar"
                            style="
                                background: rgba(255, 255, 255, 0.3);
                                border-radius: 8px;
                                height: 8px;
                            "
                        >
                            <div
                                class="progress-fill"
                                [style.width.%]="stat.base_stat / 2"
                                [attr.aria-valuenow]="stat.base_stat"
                                style="
                                    background-color: #ffffff;
                                    height: 100%;
                                    border-radius: 8px;
                                    transition: width 0.4s ease;
                                "
                            ></div>
                        </div>
                    </div>
                </div>

                <h3>Abilities</h3>
                <ul>
                    <li *ngFor="let ability of pokemon.abilities">
                        {{ ability.ability.name | titlecase }}
                    </li>
                </ul>
            </div>
            <button class="more-info-btn" (click)="openModal(pokemon); $event.stopPropagation()">
                More Info
            </button>
        </div>
    </div>
</div>

<app-pokemon-modal *ngIf="showModal" [pokemon]="pokemon" (click)="closeModal()"></app-pokemon-modal>
